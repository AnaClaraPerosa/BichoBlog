<%= form_with(model: [post, post.comments.build], local: true) do |form| %>
<div class="form-group">
	<%= form.label :content, post.comments.first&.user_id.present? ? "Add a comment" : "Your Comment (Anonymous)" %>
	<%= form.text_area :content, class: "form-control", rows: 3, required: true %>
</div>

<% if post.comments.first&.user_id.blank? %>
	<div class="form-group">
	<%= form.label :anonymous_name, "Anonymous Name" %>
	<%= form.text_field :anonymous_name, class: "form-control" %>
	</div>
<% end %>

<%= form.submit post.comments.first&.user_id.present? ? "Post Comment" : "Post Anonymous Comment", class: "btn <%= post.comments.first&.user_id.present? ? 'btn-primary' : 'btn-secondary' %>" %>
<% end %>   
